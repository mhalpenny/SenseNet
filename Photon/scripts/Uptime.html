<!DOCTYPE HTML>
<html>
<body>
    <span id="uptime"></span><br>
    <span id="tstamp"></span>

    <br><br>
    <button onclick="start()">Connect</button>

    <script type="text/javascript">
    function start() {

        document.getElementById("uptime").innerHTML = "Waiting for data...";
        var deviceID = "3c0025000d47363433353735";
        var accessToken = "7e12b97d44098c05725e3ea3169bb89b237dba3b";
        var eventSource = new EventSource("https://api.spark.io/v1/devices/" + deviceID + "/events/?access_token=" + accessToken);

        eventSource.addEventListener('open', function(e) {
            console.log("Opened!"); },false);

        eventSource.addEventListener('error', function(e) {
            console.log("Errored!"); },false);

             return eventSource

             eventSource.addEventListener('Uptime', (e) => {
               let parsedData = JSON.parse(e.data);
               console.log('Received data', parsedData);
    
           }, false)
    }
    </script>
</body>
</html>
